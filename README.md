# 3123004548软件工程第二次作业
<center>

| PSP2 1    | Personal Software Process Stages | 预估耗时（分钟） | 实际耗时（分钟） |
|---|---|---|---|
| Planning    | 计划    |15    |10    |
| Estimate    | 估计这个任务需要多少时间 | 330   | 355   |
| Development    | 开发    | 15   |15    |
| Analysis    | 需求分析（包括学习新技术） | 30   |30    |
| Design Spec    | 生成设计文档 | 10   | 10   |
| Design Review    | 设计复审 | 15   | 15   |
| Coding Standard   | 代码规范（为目前的开发制定合适的规范） | 10   | 20   |
| Design    | 具体设计 | 30   | 50   |
| Coding    | 具体编码 | 120   | 100   |
| Code Review    | 代码复审 |5    | 10   |
| Test    | 测试（自我测试，修改代码，提交修改） |15    | 30   |
| Reporting    | 报告    | 15   | 10   |
| Test Report    | 测试报告 | 15   | 10   |
| Size Measurement    | 计算工作量 | 20    | 25   |
| Postmortem & Process Improvement Plan | 事后总结，并提出过程改进计划 | 15   | 20   |

</center>

# 模块接口的设计与实现过程
 ## 设计概述

设计了一个基于 SimHash 算法的文本相似度计算模块，用于检测文本之间的重复率。该模块包含一个核心类 `Simhash` 和多个辅助函数，能够高效处理中文文本相似度比较。

## 代码组织

### 1. 核心函数 - Simhash

**主要功能**：计算和表示文本的 SimHash 值，提供相似度比较功能

**关键属性**：
- `value`：存储计算得到的 SimHash 值
- `f`：SimHash 的位数（默认 64 位）
- `hashfunc`：使用的哈希函数（默认 MD5）

**关键方法**：
- `__init__()`：支持多种初始化方式（文本、特征、已有 SimHash 对象）
- `build_by_text()`：从文本构建 SimHash
- `build_by_features()`：从特征词构建 SimHash
- `_tokenize()`：中文分词和预处理
- `distance()`：计算两个 SimHash 的海明距离
- `similarity()`：计算两个 SimHash 的相似度

### 2. 辅助函数

- `read_file()`：读取文件内容
- `calculate_similarity()`：计算两段文本的相似度
- `main()`：命令行接口处理

## 算法关键点

### 1. SimHash 算法核心流程

1. **分词处理**：使用 jieba 对中文文本进行分词
2. **特征提取**：过滤单字和非中文字符，统计词频
3. **哈希计算**：对每个特征词进行哈希
4. **加权合并**：根据词频对哈希值进行加权
5. **降维生成**：将加权结果降维生成最终指纹

### 2. 中文处理优化

- 使用 jieba 进行中文分词
- 过滤单字和标点符号，保留有意义的词汇
- 只处理中文字符，提高算法对中文文本的适应性

### 3. 内存优化

- 使用批量处理（`batch_size=200`）减少内存占用
- 对大权重特征进行特殊处理，避免内存爆炸

## 独到之处

1. 中文优化，专门针对中文文本特点进行优化，使用 jieba 分词和中文过滤
2. 接口灵活，支持多种输入方式（文本、特征字典、已有 SimHash 对象）
3. 兼容性好，同时支持 Python 2 和 Python 3
4. 实用性强，提供完整的文件读写和命令行接口，方便集成到实际系统中
